<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.qcap.cac.common.dao.TbSysFileMapper" >
  
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    delete from tb_sys_file
    where TB_FILE_ID_ = #{tbFileId}
  </delete>
  
    <delete id="deleteByGroupId" parameterType="java.lang.String" >
    delete from tb_sys_file
    where GROUP_ID_ = #{groupId}
  </delete> 
  
  <insert id="insert" parameterType="com.qcap.cac.model.TbSysFile" >
    insert into tb_sys_file (TB_FILE_ID_, GROUP_ID_, FILE_NAME_, 
      FILE_PATH_, REMARK_, CREATE_EMP_, 
      CREATE_DATE_, UPDATE_DATE_, UPDATE_EMP_, 
      VERSION)
    values (#{tbFileId,jdbcType=VARCHAR}, #{groupId,jdbcType=VARCHAR}, #{fileName,jdbcType=VARCHAR}, 
      #{filePath,jdbcType=VARCHAR}, #{remark,jdbcType=VARCHAR}, #{createEmp,jdbcType=VARCHAR}, 
      #{createDate,jdbcType=TIMESTAMP}, #{updateDate,jdbcType=TIMESTAMP}, #{updateEmp,jdbcType=VARCHAR}, 
      #{version,jdbcType=INTEGER})
  </insert>
  
  <update id="updateByPrimaryKey" parameterType="com.qcap.cac.model.TbSysFile" >
    update tb_sys_file
    <set >
      <if test="groupId != null and groupId!='' " >
        GROUP_ID_ = #{groupId,jdbcType=VARCHAR},
      </if>
      <if test="fileName != null and fileName!='' " >
        FILE_NAME_ = #{fileName,jdbcType=VARCHAR},
      </if>
      <if test="filePath != null and filePath!='' " >
        FILE_PATH_ = #{filePath,jdbcType=VARCHAR},
      </if>
      <if test="remark != null and remark!='' " >
        REMARK_ = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="createEmp != null and createEmp!='' " >
        CREATE_EMP_ = #{createEmp,jdbcType=VARCHAR},
      </if>
      <if test="createDate != null and createDate!='' " >
        CREATE_DATE_ = #{createDate,jdbcType=TIMESTAMP},
      </if>
      <if test="updateDate != null and updateDate!=''" >
        UPDATE_DATE_ = #{updateDate,jdbcType=TIMESTAMP},
      </if>
      <if test="updateEmp != null and updateEmp!=''" >
        UPDATE_EMP_ = #{updateEmp,jdbcType=VARCHAR},
      </if>
      VERSION=VERSION+1
    </set>
    where TB_FILE_ID_ = #{tbFileId}
  </update>
  
   <select id="selectByPrimaryKey" resultType="com.qcap.cac.model.TbSysFile" parameterType="java.lang.String" >
    select 
    TB_FILE_ID_ AS tbFileId,
	GROUP_ID_ AS groupId,
	FILE_NAME_ AS fileName,
	FILE_PATH_ AS filePath,
	REMARK_ AS remark,
	CREATE_EMP_ AS createEmp,
	DATE_FORMAT(CREATE_DATE_,'%Y-%m-%d %h:%i:%s') AS createDate,
	UPDATE_DATE_ AS updateDate,
	UPDATE_EMP_ AS updateEmp,
	VERSION AS version
    from tb_sys_file
    where TB_FILE_ID_ = #{tbFileId}
  </select>
  
  <select id="selectFileByGroupId" resultType="Map" parameterType="java.lang.String" >
    select 
    TB_FILE_ID_ AS tbFileId,
	GROUP_ID_ AS groupId,
	FILE_NAME_ AS fileName,
	FILE_PATH_ AS filePath,
	REMARK_ AS remark,
	CREATE_EMP_ AS createEmp,
	DATE_FORMAT(CREATE_DATE_,'%Y-%m-%d %h:%i:%s') AS createDate,
	UPDATE_DATE_ AS updateDate,
	UPDATE_EMP_ AS updateEmp,
	VERSION AS version
    from tb_sys_file
    where GROUP_ID_ = #{groupId}
  </select>

</mapper>